---
title: "Function Call Events"
description: "External function execution events"
---

Function call events handle external function execution during conversations. These events enable the AI to integrate with external APIs and execute custom business logic.

## Event Types

### `response.function_call_arguments.done`
Triggered when the AI determines that a function call is needed.

**Event data**:
- `arguments`: JSON string containing function call parameters
- `call_id`: Unique identifier for this function call

**When to handle**: Parse arguments, execute the function, and return results.

<CodeGroup>
```javascript JavaScript
case "response.function_call_arguments.done":
  console.log("Function call requested:", data);
  handleFunctionCall(data);
  break;

function handleFunctionCall(eventJson) {
  try {
    const functionCallArgs = JSON.parse(eventJson.arguments);
    const userInput = functionCallArgs.userInput;
    const callId = eventJson.call_id;
    
    // Execute your function (e.g., query knowledge base, call external API)
    // Then send result back using sendFunctionCallResult()
  } catch (error) {
    console.error("Error parsing function call arguments:", error);
  }
}
```

```python Python
if data.get('type') == 'response.function_call_arguments.done':
    print(f"Function call requested: {data}")
    await handle_function_call(data)

async def handle_function_call(event_json):
    try:
        function_call_args = json.loads(event_json['arguments'])
        user_input = function_call_args['userInput']
        call_id = event_json['call_id']
        
        # Execute your function (e.g., query knowledge base, call external API)
        # Then send result back using send_function_call_result()
    except Exception as error:
        print(f"Error parsing function call arguments: {error}")
```
</CodeGroup>

## Complete Function Call Flow

### Step 1: Receive Function Call Request
```javascript
// AI determines function needed
case "response.function_call_arguments.done":
  const args = JSON.parse(data.arguments);
  const callId = data.call_id;
  await executeFunction(args, callId);
```

### Step 2: Execute Function
```javascript
async function executeFunction(args, callId) {
  // Call external API or execute business logic
  const result = await queryKnowledgeBase(args.userInput);
  
  // Send result back
  sendFunctionCallResult(result, callId);
}
```

### Step 3: Send Function Result
```javascript
function sendFunctionCallResult(result, callId) {
  // Send the function call output
  socket.send(JSON.stringify({
    type: 'conversation.item.create',
    item: {
      type: 'function_call_output',
      output: result,
      call_id: callId
    }
  }));
  
  // Request AI response
  socket.send(JSON.stringify({
    type: 'response.create'
  }));
}
```

### Step 4: AI Processes Result
After sending the function result and requesting `response.create`, you'll receive normal response events:
- `response.audio_transcript.delta` (multiple times)
- `response.audio_transcript.done`
- `response.audio.done`

## Event Flow

```
AI determines function needed
  ↓
Receive response.function_call_arguments.done
  ↓
Parse arguments and call_id
  ↓
Execute external function or API call
  ↓
Send conversation.item.create (function_call_output)
  ↓
Send response.create
  ↓
Receive normal response events
  ↓
AI generates response using function result
```

<Warning>
Always call `response.create` after sending the function call output. This tells the AI to process the function result and continue the conversation.
</Warning>

<Info>
For detailed information on handling function calls, see the [Function Calling](/api/real-time-digital-human-api/function-calling) documentation.
</Info>

